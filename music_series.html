<!DOCTYPE html>
<html>
<head>
	<title>music_graph</title>
	<meta charset="utf-8">
	<link rel="stylesheet" type="text/css" href="basictheme.css">
	<style> /* set the CSS */
	.line {
		fill: none;
		stroke: steelblue;
		stroke-width: 3px;
	}
	</style>
</head>
<body>
	<script type="text/javascript" src="d3.js"></script>
	<script src="https://d3js.org/d3.v3.min.js"></script>
	<script src="https://d3js.org/d3.v4.min.js"></script>
	<script>
		// set the dimensions and margins of the graph
		var margin = {top: 20, right: 20, bottom: 30, left: 150},
		    width = 960 - margin.left - margin.right,
		    height = 500 - margin.top - margin.bottom;
		
		// parse the date / time
		var parseTime = d3.time.format("%Y-%m-%d").parse;
		
		// set the ranges
		var x = d3.scaleTime().domain([parseTime("Jan"),parseTime("Dec")]).range([0, width]);
		var y = d3.scaleLinear().range([height, 0]);
			
		// define the line
		var valueline = d3.line()
		    .x(function(d) { return x(d.date); })
		    .y(function(d) { return y(d.count); });
			  
		// append the svg obgect to the body of the page
		// appends a 'group' element to 'svg'
		// moves the 'group' element to the top left margin
		var svg = d3.select("body").append("svg")
		    .attr("width", 1000 + margin.left + margin.right)
		    .attr("height", height + margin.top + margin.bottom)
			.append("g")
			.attr("transform", "translate(" + margin.left + "," + margin.top + ")");
			
			
		function draw(data) {
			  
			var data = data["children"][0]["children"][0]["counts"];
			 
			// format the data
			data.forEach(function(d) {
			   	d.date = parseTime(d.date);
			   	d.count = +d.count;
			});
			  		 
			// Scale the range of the data
			x.domain(d3.extent(data, function(d) { return d.date; }));
			y.domain([0, d3.max(data, function(d) { return d.count })]);
			  
			// Add the valueline path.
			svg.append("path").data([data]).attr("class", "line").style("stroke", "red").attr("d", valueline);

			// Add the X Axis
			svg.append("g").attr("transform", "translate(0," + height + ")").call(d3.axisBottom(x));
			
			// Add the Y Axis
			svg.append("g").call(d3.axisLeft(y));

			svg.append("text").attr("transform", "translate(795,8)").attr("dy", ".35em").attr("text-anchor", "start").style("fill", "red").text("minimalism");
		}

		function draw1(data) {
			  
			var data = data["children"][0]["children"][1]["counts"];
			 
			// format the data
			data.forEach(function(d) {
			   	d.date = parseTime(d.date);
			   	d.count = +d.count;
			});
			  		 
			// Scale the range of the data
			x.domain(d3.extent(data, function(d) { return d.date; }));
			y.domain([0, d3.max(data, function(d) { return d.count })]);
			  
			// Add the valueline path.
			svg.append("path").data([data]).attr("class", "line").style("stroke", "green").attr("d", valueline);

			// Add the X Axis
			/*svg.append("g").attr("transform", "translate(0," + height + ")").call(d3.axisBottom(x));*/
			
			svg.append("text").attr("transform", "translate(795,40)").attr("dy", ".35em").attr("text-anchor", "start").style("fill", "green").text("dark ambient");
			// Add the Y Axis
			//svg.append("g").call(d3.axisLeft(y));
		}

		function draw2(data) {
			  
			var data = data["children"][0]["children"][2]["counts"];
			 
			// format the data
			data.forEach(function(d) {
			   	d.date = parseTime(d.date);
			   	d.count = +d.count;
			});
			  		 
			// Scale the range of the data
			x.domain(d3.extent(data, function(d) { return d.date; }));
			y.domain([0, d3.max(data, function(d) { return d.count })]);
			  
			// Add the valueline path.
			svg.append("path").data([data]).attr("class", "line").style("stroke", "brown").attr("d", valueline);

			// Add the X Axis
			/*svg.append("g").attr("transform", "translate(0," + height + ")").call(d3.axisBottom(x));*/
			
			svg.append("text").attr("transform", "translate(795,25)").attr("dy", ".35em").attr("text-anchor", "start").style("fill", "brown").text("kranky");
			// Add the Y Axis
			//svg.append("g").call(d3.axisLeft(y));
		}

		function draw3(data) {
			  
			var data = data["children"][0]["children"][3]["counts"];
			 
			// format the data
			data.forEach(function(d) {
			   	d.date = parseTime(d.date);
			   	d.count = +d.count;
			});
			  		 
			// Scale the range of the data
			x.domain(d3.extent(data, function(d) { return d.date; }));
			y.domain([0, d3.max(data, function(d) { return d.count })]);
			  
			// Add the valueline path.
			svg.append("path").data([data]).attr("class", "line").style("stroke", "#ff1a8c").attr("d", valueline);

			// Add the X Axis
			/*svg.append("g").attr("transform", "translate(0," + height + ")").call(d3.axisBottom(x));*/
			
			svg.append("text").attr("transform", "translate(795,375)").attr("dy", ".35em").attr("text-anchor", "start").style("fill", "#ff1a8c").text("atmospheric");
			// Add the Y Axis
			//svg.append("g").call(d3.axisLeft(y));
		}

		function draw4(data) {
			  
			var data = data["children"][0]["children"][4]["counts"];
			 
			// format the data
			data.forEach(function(d) {
			   	d.date = parseTime(d.date);
			   	d.count = +d.count;
			});
			  		 
			// Scale the range of the data
			x.domain(d3.extent(data, function(d) { return d.date; }));
			y.domain([0, d3.max(data, function(d) { return d.count })]);
			  
			// Add the valueline path.
			svg.append("path").data([data]).attr("class", "line").style("stroke", "#00ccff").attr("d", valueline);

			// Add the X Axis
			/*svg.append("g").attr("transform", "translate(0," + height + ")").call(d3.axisBottom(x));*/
			
			svg.append("text").attr("transform", "translate(793,-3)").attr("dy", ".35em").attr("text-anchor", "start").style("fill", "#00ccff").text("ambient");
			// Add the Y Axis
			//svg.append("g").call(d3.axisLeft(y));
		}

		function draw5(data) {
			  
			var data = data["children"][0]["children"][5]["counts"];
			 
			// format the data
			data.forEach(function(d) {
			   	d.date = parseTime(d.date);
			   	d.count = +d.count;
			});
			  		 
			// Scale the range of the data
			x.domain(d3.extent(data, function(d) { return d.date; }));
			y.domain([0, d3.max(data, function(d) { return d.count })]);
			  
			// Add the valueline path.
			svg.append("path").data([data]).attr("class", "line").style("stroke", "#ff9900").attr("d", valueline);

			// Add the X Axis
			/*svg.append("g").attr("transform", "translate(0," + height + ")").call(d3.axisBottom(x));*/
			
			svg.append("text").attr("transform", "translate(795,390)").attr("dy", ".35em").attr("text-anchor", "start").style("fill", "#ff9900").text("instrumental");
			// Add the Y Axis
			//svg.append("g").call(d3.axisLeft(y));
		}

		function draw6(data) {
			  
			var data = data["children"][0]["children"][6]["counts"];
			 
			// format the data
			data.forEach(function(d) {
			   	d.date = parseTime(d.date);
			   	d.count = +d.count;
			});
			  		 
			// Scale the range of the data
			x.domain(d3.extent(data, function(d) { return d.date; }));
			y.domain([0, d3.max(data, function(d) { return d.count })]);
			  
			// Add the valueline path.
			svg.append("path").data([data]).attr("class", "line").style("stroke", "#666600").attr("d", valueline);

			// Add the X Axis
			/*svg.append("g").attr("transform", "translate(0," + height + ")").call(d3.axisBottom(x));*/
			
			svg.append("text").attr("transform", "translate(795,235)").attr("dy", ".35em").attr("text-anchor", "start").style("fill", "#666600").text("experimental");
			// Add the Y Axis
			//svg.append("g").call(d3.axisLeft(y));
		}

		function draw7(data) {
			  
			var data = data["children"][0]["children"][7]["counts"];
			 
			// format the data
			data.forEach(function(d) {
			   	d.date = parseTime(d.date);
			   	d.count = +d.count;
			});
			  		 
			// Scale the range of the data
			x.domain(d3.extent(data, function(d) { return d.date; }));
			y.domain([0, d3.max(data, function(d) { return d.count })]);
			  
			// Add the valueline path.
			svg.append("path").data([data]).attr("class", "line").style("stroke", "#662200").attr("d", valueline);

			// Add the X Axis
			/*svg.append("g").attr("transform", "translate(0," + height + ")").call(d3.axisBottom(x));*/
			
			svg.append("text").attr("transform", "translate(795,-15)").attr("dy", ".35em").attr("text-anchor", "start").style("fill", "#662200").text("noise");
			// Add the Y Axis
			//svg.append("g").call(d3.axisLeft(y));
		}

		function draw8(data) {
			  
			var data = data["children"][0]["children"][8]["counts"];
			 
			// format the data
			data.forEach(function(d) {
			   	d.date = parseTime(d.date);
			   	d.count = +d.count;
			});
			  		 
			// Scale the range of the data
			x.domain(d3.extent(data, function(d) { return d.date; }));
			y.domain([0, d3.max(data, function(d) { return d.count })]);
			  
			// Add the valueline path.
			svg.append("path").data([data]).attr("class", "line").style("stroke", "#b800e6").attr("d", valueline);

			// Add the X Axis
			/*svg.append("g").attr("transform", "translate(0," + height + ")").call(d3.axisBottom(x));*/
			
			svg.append("text").attr("transform", "translate(865,-4)").attr("dy", ".35em").attr("text-anchor", "start").style("fill", "#b800e6").text("ambient genre");
			// Add the Y Axis
			//svg.append("g").call(d3.axisLeft(y));
		}

		function draw9(data) {
			  
			var data = data["children"][1]["children"][0]["counts"];
			 
			// format the data
			data.forEach(function(d) {
			   	d.date = parseTime(d.date);
			   	d.count = +d.count;
			});
			  		 
			// Scale the range of the data
			x.domain(d3.extent(data, function(d) { return d.date; }));
			y.domain([0, d3.max(data, function(d) { return d.count })]);
			  
			// Add the valueline path.
			svg.append("path").data([data]).attr("class", "line").style("stroke", "black").attr("d", valueline);

			// Add the X Axis
			/*svg.append("g").attr("transform", "translate(0," + height + ")").call(d3.axisBottom(x));*/
			
			svg.append("text").attr("transform", "translate(795,185)").attr("dy", ".35em").attr("text-anchor", "start").style("fill", "black").text("psych genre");
			// Add the Y Axis
			//svg.append("g").call(d3.axisLeft(y));
		}

		function draw10(data) {
			  
			var data = data["children"][1]["children"][1]["counts"];
			 
			// format the data
			data.forEach(function(d) {
			   	d.date = parseTime(d.date);
			   	d.count = +d.count;
			});
			  		 
			// Scale the range of the data
			x.domain(d3.extent(data, function(d) { return d.date; }));
			y.domain([0, d3.max(data, function(d) { return d.count })]);
			  
			// Add the valueline path.
			svg.append("path").data([data]).attr("class", "line").style("stroke", "#b3b300").attr("d", valueline);

			// Add the X Axis
			/*svg.append("g").attr("transform", "translate(0," + height + ")").call(d3.axisBottom(x));*/
			
			svg.append("text").attr("transform", "translate(795,305)").attr("dy", ".35em").attr("text-anchor", "start").style("fill", "#b3b300").text("metal genre");
			// Add the Y Axis
			//svg.append("g").call(d3.axisLeft(y));
		}

		function draw11(data) {
			  
			var data = data["children"][1]["children"][2]["counts"];
			 
			// format the data
			data.forEach(function(d) {
			   	d.date = parseTime(d.date);
			   	d.count = +d.count;
			});
			  		 
			// Scale the range of the data
			x.domain(d3.extent(data, function(d) { return d.date; }));
			y.domain([0, d3.max(data, function(d) { return d.count })]);
			  
			// Add the valueline path.
			svg.append("path").data([data]).attr("class", "line").style("stroke", "#ff4d88").attr("d", valueline);

			// Add the X Axis
			/*svg.append("g").attr("transform", "translate(0," + height + ")").call(d3.axisBottom(x));*/
			
			svg.append("text").attr("transform", "translate(795,125)").attr("dy", ".35em").attr("text-anchor", "start").style("fill", "#ff4d88").text("rock genre");
			// Add the Y Axis
			//svg.append("g").call(d3.axisLeft(y));
		}

		function draw12(data) {
			  
			var data = data["children"][2]["children"][3]["counts"];
			 
			// format the data
			data.forEach(function(d) {
			   	d.date = parseTime(d.date);
			   	d.count = +d.count;
			});
			  		 
			// Scale the range of the data
			x.domain(d3.extent(data, function(d) { return d.date; }));
			y.domain([0, d3.max(data, function(d) { return d.count })]);
			  
			// Add the valueline path.
			svg.append("path").data([data]).attr("class", "line").style("stroke", "#00ff00").attr("d", valueline);

			// Add the X Axis
			/*svg.append("g").attr("transform", "translate(0," + height + ")").call(d3.axisBottom(x));*/
			
			svg.append("text").attr("transform", "translate(795,253)").attr("dy", ".35em").attr("text-anchor", "start").style("fill", "#00ff00").text("electronica");
			// Add the Y Axis
			//svg.append("g").call(d3.axisLeft(y));
		}
			
			
		// Get the data
		d3.json("music_time_series.json", function(error, data) {
			  	
			if (error) throw error;
			  
			// trigger render
			draw(data);
			draw1(data);
			draw2(data);
			draw3(data);
			draw4(data);
			draw5(data);
			draw6(data);
			draw7(data);
			draw8(data);
			draw9(data);
			draw10(data);
			draw11(data);
			draw12(data);
			
			
		});
	</script>
</body>
</html>